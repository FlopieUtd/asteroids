!function(e){var t={};function i(o){if(t[o])return t[o].exports;var s=t[o]={i:o,l:!1,exports:{}};return e[o].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=e,i.c=t,i.d=function(e,t,o){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(i.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)i.d(o,s,function(t){return e[t]}.bind(null,s));return o},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/asteroids/dist/",i(i.s=4)}([function(e,t,i){e.exports=i.p+"6c4bc188a94612a4c76f7edf1914fc6c.png"},function(e,t,i){e.exports=i.p+"916b92ba89712745b19cc31a8997f204.png"},function(e,t,i){e.exports=i.p+"dc92b39876805bab12f80d7e48aa9078.png"},function(e,t,i){e.exports=i.p+"dbf9fe289fb3ae3bc85f5ebb95d23b35.png"},function(e,t,i){"use strict";i.r(t);var o=i(0),s=i.n(o),n=i(1),a=i.n(n),l=i(2),r=i.n(l),c=i(3),p=i.n(c);const d=document.querySelector("body"),h=document.querySelector(".canvas"),u=h.getContext("2d"),y=document.querySelector(".score"),g=document.querySelector(".shield-track"),b=document.querySelector(".shield-bar"),f=document.querySelector(".notice");h.width=d.clientWidth,h.height=d.clientHeight;const m=new Image(25,25);m.src=a.a;const x=new Image(25,25);x.src=s.a;const v=new Image(25,25);v.src=r.a;const w=new Image(25,25);w.src=p.a;const M={width:d.clientWidth,height:d.clientHeight},S={input:{left:!1,up:!1,right:!1,space:!1},ship:{angle:0,thrust:{x:0,y:0},velocity:{x:12,y:0},position:{x:0,y:M.height/2},bulletDelay:0,bulletSpeed:32,radius:5},bullets:[],asteroids:[],newAsteroidIn:1200,upgrades:{},bonuses:{shotgun:0},asteroidVelocity:1,shield:4,score:0},P=(e,t)=>({x:Math.cos(t)*e,y:Math.sin(t)*e}),k=(e,t)=>{e.x+=t.x,e.y+=t.y},I=(e,t)=>{e.x*=t,e.y*=t},E=(e,t,i)=>{e.position.x>t&&(e.position.x=0),e.position.x<0&&(e.position.x=t),e.position.y>i&&(e.position.y=0),e.position.y<0&&(e.position.y=i)},T=(e,t=!0)=>{f.innerHTML=e,f.style.opacity=1,f.style.transform="translateY(-10px)",t&&setTimeout(()=>{f.style.opacity=0,f.style.transform="translateY(0px)"},2500)},j=(e,t,i,o)=>{S.asteroids.push({position:{x:e,y:t},radius:i+Math.random()*i/2,velocity:P(S.asteroidVelocity,Math.random()*(2*Math.PI)),angle:Math.random()*(2*Math.PI),sides:7,size:o,rotation:(Math.random()-.5)/(i/2)**3*25}),S.asteroidVelocity+=.004},O=e=>{const t=Math.random();"big"===e.size&&(j(e.position.x,e.position.y,35,"medium"),j(e.position.x,e.position.y,35,"medium"),t>.75&&j(e.position.x,e.position.y,35,"medium")),"medium"===e.size&&(j(e.position.x,e.position.y,20,"small"),j(e.position.x,e.position.y,20,"small"),t>.75&&j(e.position.x,e.position.y,20,"small")),"small"===e.size&&(S.score+=100,Math.random()>.85&&(e=>{const t=Math.random(),i=Date.now(),o={id:i,position:{x:e.position.x,y:e.position.y},velocity:e.velocity,angle:e.angle,radius:15};t<.25&&(o.type="bullet",o.icon=m),t>.25&&t<.5&&(o.type="atom",o.icon=x),t>.5&&t<.75&&(o.type="shield",o.icon=v),t>.75&&(o.type="shotgun",o.icon=w),S.upgrades[i]=o,setTimeout(()=>{delete S.upgrades[i]},4e3)})(e))},q=(e,t)=>{return(e=>Math.sqrt(e.x*e.x+e.y*e.y))({x:e.position.x-t.position.x,y:e.position.y-t.position.y})<e.radius+t.radius},z=()=>{S.bullets.forEach((e,t)=>{S.asteroids.forEach((i,o)=>{q(e,i)&&(O(i),S.asteroids.splice(o,1),S.bullets.splice(t,1))})}),S.asteroids.forEach((e,t)=>{q(S.ship,e)&&(O(e),S.asteroids.splice(t,1),S.shield-=1,g.style.opacity=1,b.style.width=`${25*S.shield}%`)}),Object.values(S.upgrades).forEach(e=>{q(S.ship,e)&&(delete S.upgrades[e.id],"bullet"===e.type&&(S.ship.bulletSpeed>=6?(T("bullet speed increased!"),S.ship.bulletSpeed-=.75):T("max bullet speed!")),"atom"===e.type&&(T("time dilated!",S.asteroidVelocity),S.asteroidVelocity-=.15,S.asteroidVelocity<1&&(S.asteroidVelocity=1),S.asteroids.forEach(e=>{I(e.velocity,.6),e.rotation*=.6})),"shield"===e.type&&(100===S.shield?T("shield fully charged"):(S.shield+=1,S.shield>4&&(S.shield=4),b.style.width=`${25*S.shield}%`,T("shield recharged!"))),"shotgun"===e.type&&(T("shotgun activated!"),S.bonuses.shotgun=20))})},A=()=>{const{left:e,right:t,up:i,space:o}=S.input;e&&(S.ship.angle-=.1),t&&(S.ship.angle+=.1),i?S.ship.thrust=P(.08,S.ship.angle):(S.ship.thrust=P(0,S.ship.angle),I(S.ship.velocity,.98)),k(S.ship.velocity,S.ship.thrust),k(S.ship.position,S.ship.velocity),E(S.ship,M.width,M.height),S.ship.bulletDelay+=1,o&&S.ship.bulletDelay>S.ship.bulletSpeed&&((()=>{if(S.bonuses.shotgun>0){S.bonuses.shotgun-=1;for(let e=0;e<3;e+=1)S.bullets.push({position:{x:S.ship.position.x,y:S.ship.position.y},velocity:P(12,S.ship.angle+(-1+e)/15),radius:1})}else S.bullets.push({position:{x:S.ship.position.x,y:S.ship.position.y},velocity:P(14,S.ship.angle),radius:1})})(),S.ship.bulletDelay=0)};window.addEventListener("keydown",e=>{switch(e.keyCode){case 65:case 37:S.input.left=!0;break;case 87:case 38:S.input.up=!0;break;case 68:case 39:S.input.right=!0;break;case 32:case 75:S.input.space=!0}}),window.addEventListener("keyup",e=>{switch(e.keyCode){case 65:case 37:S.input.left=!1;break;case 87:case 38:S.input.up=!1;break;case 68:case 39:S.input.right=!1;break;case 32:case 75:S.input.space=!1}}),window.addEventListener("resize",()=>{M.width=d.clientWidth,M.height=d.clientHeight,h.width=M.width,h.height=M.height});const V=()=>{y.innerHTML=S.score,A(),S.bullets.forEach((e,t)=>{k(e.position,e.velocity),(e.position.x>M.width||e.position.x<0||e.position.y>M.height||e.position.y<0)&&S.bullets.splice(t,1)}),S.asteroids.forEach(e=>{k(e.position,e.velocity),E(e,M.width,M.height),e.angle+=e.rotation}),S.asteroids.filter(e=>["big","medium"].includes(e.size)).length<4&&j(0,0,50,"big"),S.newAsteroidIn-=1,S.newAsteroidIn<1&&S.asteroids.filter(e=>["big","medium"].includes(e.size)).length<12&&(S.newAsteroidIn=1200,j(0,0,50,"big")),Object.values(S.upgrades).forEach(e=>{k(e.position,e.velocity),I(e.velocity,.98),E(e,M.width,M.height)})},H=()=>{u.fillStyle="#111111",u.globalAlpha=.7,u.fillRect(0,0,h.clientWidth,h.clientHeight),u.globalAlpha=1,(()=>{const{x:e,y:t}=S.ship.position;u.save(),u.translate(e,t),u.rotate(S.ship.angle),u.strokeStyle="magenta",u.lineWidth=Math.random()>.9?2:1,u.beginPath(),u.moveTo(10,0),u.lineTo(-10,-8),u.lineTo(-10,8),u.lineTo(10,0),u.stroke(),u.closePath(),u.restore()})(),S.bullets.forEach(e=>{u.beginPath(),u.strokeStyle="white",u.arc(Math.floor(e.position.x),Math.floor(e.position.y),1,0,2*Math.PI),Math.random()>.2&&u.stroke(),u.closePath()}),S.asteroids.forEach(e=>{u.beginPath(),u.lineWidth=Math.random()>.2?2:1,u.strokeStyle="cyan";let t=e.sides;for(u.moveTo(e.position.x+Math.cos(2*Math.PI*(t/e.sides)+e.angle)*e.radius,e.position.y+Math.sin(2*Math.PI*(t/e.sides)+e.angle)*e.radius);t>-1;t-=1)u.lineTo(e.position.x+Math.cos(2*Math.PI*(t/e.sides)+e.angle)*e.radius,e.position.y+Math.sin(2*Math.PI*(t/e.sides)+e.angle)*e.radius);u.stroke(),u.closePath()}),Object.values(S.upgrades).forEach(e=>{u.save(),u.drawImage(e.icon,e.position.x-10,e.position.y-10),u.restore()})},W=()=>{V(),z(),H(),S.shield<=0?T(`game over! score: ${S.score}`,!1):window.requestAnimationFrame(W)};W()}]);