!function(e){var t={};function i(o){if(t[o])return t[o].exports;var s=t[o]={i:o,l:!1,exports:{}};return e[o].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=e,i.c=t,i.d=function(e,t,o){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(i.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)i.d(o,s,function(t){return e[t]}.bind(null,s));return o},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="C:\\Users\\flopie3000\\Desktop\\Code\\Projecten\\asteroids\\dist/",i(i.s=4)}([function(e,t,i){e.exports=i.p+"6c4bc188a94612a4c76f7edf1914fc6c.png"},function(e,t,i){e.exports=i.p+"916b92ba89712745b19cc31a8997f204.png"},function(e,t,i){e.exports=i.p+"dc92b39876805bab12f80d7e48aa9078.png"},function(e,t,i){e.exports=i.p+"dbf9fe289fb3ae3bc85f5ebb95d23b35.png"},function(e,t,i){"use strict";i.r(t);const o=(e,t)=>({x:Math.cos(t)*e,y:Math.sin(t)*e}),s=(e,t)=>{e.x+=t.x,e.y+=t.y},n=(e,t)=>{e.x=e.x*t,e.y=e.y*t},a=(e,t,i)=>{e.position.x>t&&(e.position.x=0),e.position.x<0&&(e.position.x=t),e.position.y>i&&(e.position.y=0),e.position.y<0&&(e.position.y=i)},l=(e,t)=>{return(e=>Math.sqrt(e.x*e.x+e.y*e.y))({x:e.position.x-t.position.x,y:e.position.y-t.position.y})<e.radius+t.radius};var r=i(0),p=i.n(r),d=i(1),c=i.n(d),h=i(2),u=i.n(h),y=i(3),g=i.n(y);const b=document.querySelector("body"),f=document.getElementById("canvas"),m=f.getContext("2d"),x=document.getElementById("points"),v=document.getElementById("shield-track"),w=document.getElementById("shield-bar");f.width=b.clientWidth,f.height=b.clientHeight;const M=new Image(25,25);M.src=c.a;const I=new Image(25,25);I.src=p.a;const P=new Image(25,25);P.src=u.a;const k=new Image(25,25);k.src=g.a;const E={width:b.clientWidth,height:b.clientHeight},S={input:{left:!1,up:!1,right:!1,space:!1},ship:{angle:0,thrust:{x:0,y:0},velocity:{x:12,y:0},position:{x:0,y:E.height/2},bulletDelay:0,bulletSpeed:24,radius:5},bullets:[],asteroids:[],newAsteroidIn:1200,upgrades:{},bonuses:{shotgun:0},asteroidVelocity:1,shield:4,points:0},j=(e,t,i,s)=>{S.asteroids.push({position:{x:e,y:t},radius:i+Math.random()*i/2,velocity:o(S.asteroidVelocity,Math.random()*(2*Math.PI)),angle:Math.random()*(2*Math.PI),sides:7,size:s,rotation:(Math.random()-.5)/(i/2)**3*25}),S.asteroidVelocity+=.0025},T=e=>{const t=Math.random();"big"===e.size&&(j(e.position.x,e.position.y,35,"medium"),j(e.position.x,e.position.y,35,"medium"),t>.75&&j(e.position.x,e.position.y,35,"medium")),"medium"===e.size&&(j(e.position.x,e.position.y,20,"small"),j(e.position.x,e.position.y,20,"small"),t>.75&&j(e.position.x,e.position.y,20,"small")),"small"===e.size&&(S.points+=100,Math.random()>.9&&(e=>{const t=Math.random(),i=Date.now(),o={id:i,position:{x:e.position.x,y:e.position.y},velocity:e.velocity,angle:e.angle,radius:15};t<.25&&(o.type="bullet",o.icon=M),t>.25&&t<.5&&(o.type="atom",o.icon=I),t>.5&&t<.75&&(o.type="shield",o.icon=P),t>.75&&(o.type="shotgun",o.icon=k),S.upgrades[i]=o,setTimeout(()=>{delete S.upgrades[i]},4e3)})(e))};window.addEventListener("keydown",e=>{switch(e.keyCode){case 65:case 37:S.input.left=!0;break;case 87:case 38:S.input.up=!0;break;case 68:case 39:S.input.right=!0;break;case 32:case 75:S.input.space=!0}}),window.addEventListener("keyup",e=>{switch(e.keyCode){case 65:case 37:S.input.left=!1;break;case 87:case 38:S.input.up=!1;break;case 68:case 39:S.input.right=!1;break;case 32:case 75:S.input.space=!1}}),window.addEventListener("resize",()=>{E.width=b.clientWidth,E.height=b.clientHeight,f.width=E.width,f.height=E.height});const O=()=>{S.bullets.forEach((e,t)=>{S.asteroids.forEach((i,o)=>{l(e,i)&&(T(i),S.asteroids.splice(o,1),S.bullets.splice(t,1))})}),S.asteroids.forEach((e,t)=>{l(S.ship,e)&&(T(e),S.asteroids.splice(t,1),S.shield-=1,v.style.opacity=1,w.style.width=`${25*S.shield}%`,S.shield<=0&&setTimeout(()=>{alert("game over!")},200))}),Object.values(S.upgrades).forEach(e=>{l(S.ship,e)&&(delete S.upgrades[e.id],"bullet"===e.type&&(S.ship.bulletSpeed>=6?(console.log("bullet speed increased!"),S.ship.bulletSpeed-=.5):console.log("max bullet speed!")),"atom"===e.type&&(console.log("time dilated!",S.asteroidVelocity),S.asteroidVelocity-=.25,S.asteroidVelocity<1&&(S.asteroidVelocity=1),S.asteroids.forEach(e=>{n(e.velocity,.6),e.rotation=.6*e.rotation})),"shield"===e.type&&(100===S.shield?console.log("shield fully charged"):(S.shield+=1,S.shield>4&&(S.shield=4),w.style.width=`${25*S.shield}%`,console.log("shield recharged!"))),"shotgun"===e.type&&(console.log("shotgun activated!"),S.bonuses.shotgun=20))})},A=()=>{const{left:e,right:t,up:i,space:l}=S.input;e&&(S.ship.angle-=.1),t&&(S.ship.angle+=.1),i?S.ship.thrust=o(.08,S.ship.angle):(S.ship.thrust=o(0,S.ship.angle),n(S.ship.velocity,.98)),s(S.ship.velocity,S.ship.thrust),s(S.ship.position,S.ship.velocity),a(S.ship,E.width,E.height),S.ship.bulletDelay+=1,l&&S.ship.bulletDelay>S.ship.bulletSpeed&&((()=>{if(S.bonuses.shotgun>0){S.bonuses.shotgun-=1;for(let e=0;e<3;e+=1)S.bullets.push({position:{x:S.ship.position.x,y:S.ship.position.y},velocity:o(12,S.ship.angle+(-1+e)/20),radius:1})}else S.bullets.push({position:{x:S.ship.position.x,y:S.ship.position.y},velocity:o(14,S.ship.angle),radius:1})})(),S.ship.bulletDelay=0)},V=()=>{x.innerHTML=S.points,A(),S.bullets.forEach((e,t)=>{s(e.position,e.velocity),(e.position.x>E.width||e.position.x<0||e.position.y>E.height||e.position.y<0)&&S.bullets.splice(t,1)}),S.asteroids.forEach(e=>{s(e.position,e.velocity),a(e,E.width,E.height),e.angle=e.angle+e.rotation}),S.asteroids.filter(e=>["big","medium"].includes(e.size)).length<5&&j(0,0,50,"big"),S.newAsteroidIn-=1,S.newAsteroidIn<1&&(S.newAsteroidIn=1200,j(0,0,50,"big")),Object.values(S.upgrades).forEach(e=>{s(e.position,e.velocity),n(e.velocity,.98),a(e,E.width,E.height)})},z=()=>{m.fillStyle="#111",m.globalAlpha=.7,m.fillRect(0,0,f.clientWidth,f.clientHeight),m.globalAlpha=1,(()=>{const{x:e,y:t}=S.ship.position;m.save(),m.translate(e,t),m.rotate(S.ship.angle),m.strokeStyle="magenta",m.lineWidth=Math.random()>.9?2:1,m.beginPath(),m.moveTo(10,0),m.lineTo(-10,-8),m.lineTo(-10,8),m.lineTo(10,0),m.stroke(),m.closePath(),m.restore()})(),S.bullets.forEach(e=>{m.beginPath(),m.strokeStyle="white",m.arc(Math.floor(e.position.x),Math.floor(e.position.y),1,0,2*Math.PI),Math.random()>.2&&m.stroke(),m.closePath()}),S.asteroids.forEach(e=>{m.beginPath(),m.lineWidth=Math.random()>.2?2:1,m.strokeStyle="cyan";let t=e.sides;for(m.moveTo(e.position.x+Math.cos(2*Math.PI*(t/e.sides)+e.angle)*e.radius,e.position.y+Math.sin(2*Math.PI*(t/e.sides)+e.angle)*e.radius);t>-1;t-=1)m.lineTo(e.position.x+Math.cos(2*Math.PI*(t/e.sides)+e.angle)*e.radius,e.position.y+Math.sin(2*Math.PI*(t/e.sides)+e.angle)*e.radius);m.stroke(),m.closePath()}),Object.values(S.upgrades).forEach(e=>{m.save(),m.drawImage(e.icon,e.position.x-10,e.position.y-10),m.restore()})},D=()=>{V(),O(),z(),window.requestAnimationFrame(D)};D()}]);